import { Contact, Message, User, UserInfo } from "@/types/base";

// Mock current user
export const currentUser: User & { userInfo: UserInfo } = {
  id: "user-1",
  email: "user@example.com",
  phoneNumber: "0123456789",
  passwordHash: "hashed_password",
  createdAt: new Date(),
  updatedAt: new Date(),
  userInfo: {
    id: "info-1",
    fullName: "Current User",
    profilePictureUrl: "https://i.pravatar.cc/150?img=1",
    statusMessage: "Online",
    blockStrangers: false,
    createdAt: new Date(),
    updatedAt: new Date(),
    userAuth: {} as User,
  },
  infoId: "info-1",
  refreshTokens: [],
  qrCodes: [],
  posts: [],
  stories: [],
  groupMembers: [],
  cloudFiles: [],
  pinnedItems: [],
  sentFriends: [],
  receivedFriends: [],
  contacts: [],
  contactOf: [],
  settings: [],
  postReactions: [],
  hiddenPosts: [],
  addedBy: [],
  notifications: [],
  sentMessages: [],
  receivedMessages: [],
  comments: [],
};

// Mock contacts
export const mockContacts: (Contact & {
  contactUser: User & { userInfo: UserInfo };
})[] = [
  {
    id: "contact-1",
    userId: currentUser.id,
    user: currentUser,
    contactUserId: "user-2",
    contactUser: {
      id: "user-2",
      email: "chanh@example.com",
      phoneNumber: "0987654321",
      passwordHash: "hashed_password",
      createdAt: new Date(),
      updatedAt: new Date(),
      userInfo: {
        id: "info-2",
        fullName: "chAnh üëã",
        profilePictureUrl: "https://i.pravatar.cc/150?img=2",
        statusMessage: "V·ª´a truy c·∫≠p",
        blockStrangers: false,
        createdAt: new Date(),
        updatedAt: new Date(),
        userAuth: {} as User,
      },
      infoId: "info-2",
      refreshTokens: [],
      qrCodes: [],
      posts: [],
      stories: [],
      groupMembers: [],
      cloudFiles: [],
      pinnedItems: [],
      sentFriends: [],
      receivedFriends: [],
      contacts: [],
      contactOf: [],
      settings: [],
      postReactions: [],
      hiddenPosts: [],
      addedBy: [],
      notifications: [],
      sentMessages: [],
      receivedMessages: [],
      comments: [],
    },
    nickname: "chAnh",
    addedAt: new Date(),
  },
  {
    id: "contact-2",
    userId: currentUser.id,
    user: currentUser,
    contactUserId: "user-3",
    contactUser: {
      id: "user-3",
      email: "cloud@example.com",
      phoneNumber: "0123456788",
      passwordHash: "hashed_password",
      createdAt: new Date(),
      updatedAt: new Date(),
      userInfo: {
        id: "info-3",
        fullName: "Cloud c·ªßa t√¥i",
        profilePictureUrl: "https://i.pravatar.cc/150?img=3",
        statusMessage: "9 gi·ªù",
        blockStrangers: false,
        createdAt: new Date(),
        updatedAt: new Date(),
        userAuth: {} as User,
      },
      infoId: "info-3",
      refreshTokens: [],
      qrCodes: [],
      posts: [],
      stories: [],
      groupMembers: [],
      cloudFiles: [],
      pinnedItems: [],
      sentFriends: [],
      receivedFriends: [],
      contacts: [],
      contactOf: [],
      settings: [],
      postReactions: [],
      hiddenPosts: [],
      addedBy: [],
      notifications: [],
      sentMessages: [],
      receivedMessages: [],
      comments: [],
    },
    nickname: "Cloud",
    addedAt: new Date(),
  },
  {
    id: "contact-3",
    userId: currentUser.id,
    user: currentUser,
    contactUserId: "user-4",
    contactUser: {
      id: "user-4",
      email: "tamnhu@example.com",
      phoneNumber: "0123456787",
      passwordHash: "hashed_password",
      createdAt: new Date(),
      updatedAt: new Date(),
      userInfo: {
        id: "info-4",
        fullName: "T√¢m Nh∆∞",
        profilePictureUrl: "https://i.pravatar.cc/150?img=4",
        statusMessage: "V√†i gi√¢y",
        blockStrangers: false,
        createdAt: new Date(),
        updatedAt: new Date(),
        userAuth: {} as User,
      },
      infoId: "info-4",
      refreshTokens: [],
      qrCodes: [],
      posts: [],
      stories: [],
      groupMembers: [],
      cloudFiles: [],
      pinnedItems: [],
      sentFriends: [],
      receivedFriends: [],
      contacts: [],
      contactOf: [],
      settings: [],
      postReactions: [],
      hiddenPosts: [],
      addedBy: [],
      notifications: [],
      sentMessages: [],
      receivedMessages: [],
      comments: [],
    },
    nickname: "T√¢m Nh∆∞",
    addedAt: new Date(),
  },
  {
    id: "contact-4",
    userId: currentUser.id,
    user: currentUser,
    contactUserId: "user-5",
    contactUser: {
      id: "user-5",
      email: "vodka@example.com",
      phoneNumber: "0123456786",
      passwordHash: "hashed_password",
      createdAt: new Date(),
      updatedAt: new Date(),
      userInfo: {
        id: "info-5",
        fullName: "Vodka",
        profilePictureUrl: "https://i.pravatar.cc/150?img=5",
        statusMessage: "2 ph√∫t",
        blockStrangers: false,
        createdAt: new Date(),
        updatedAt: new Date(),
        userAuth: {} as User,
      },
      infoId: "info-5",
      refreshTokens: [],
      qrCodes: [],
      posts: [],
      stories: [],
      groupMembers: [],
      cloudFiles: [],
      pinnedItems: [],
      sentFriends: [],
      receivedFriends: [],
      contacts: [],
      contactOf: [],
      settings: [],
      postReactions: [],
      hiddenPosts: [],
      addedBy: [],
      notifications: [],
      sentMessages: [],
      receivedMessages: [],
      comments: [],
    },
    nickname: "Vodka",
    addedAt: new Date(),
  },
  {
    id: "contact-5",
    userId: currentUser.id,
    user: currentUser,
    contactUserId: "user-6",
    contactUser: {
      id: "user-6",
      email: "kien@example.com",
      phoneNumber: "0123456785",
      passwordHash: "hashed_password",
      createdAt: new Date(),
      updatedAt: new Date(),
      userInfo: {
        id: "info-6",
        fullName: "Ki√™n",
        profilePictureUrl: "https://i.pravatar.cc/150?img=6",
        statusMessage: "7 ph√∫t",
        blockStrangers: false,
        createdAt: new Date(),
        updatedAt: new Date(),
        userAuth: {} as User,
      },
      infoId: "info-6",
      refreshTokens: [],
      qrCodes: [],
      posts: [],
      stories: [],
      groupMembers: [],
      cloudFiles: [],
      pinnedItems: [],
      sentFriends: [],
      receivedFriends: [],
      contacts: [],
      contactOf: [],
      settings: [],
      postReactions: [],
      hiddenPosts: [],
      addedBy: [],
      notifications: [],
      sentMessages: [],
      receivedMessages: [],
      comments: [],
    },
    nickname: "Ki√™n",
    addedAt: new Date(),
  },
  {
    id: "contact-6",
    userId: currentUser.id,
    user: currentUser,
    contactUserId: "user-7",
    contactUser: {
      id: "user-7",
      email: "bac@example.com",
      phoneNumber: "0123456784",
      passwordHash: "hashed_password",
      createdAt: new Date(),
      updatedAt: new Date(),
      userInfo: {
        id: "info-7",
        fullName: "B·∫Øc",
        profilePictureUrl: "https://i.pravatar.cc/150?img=7",
        statusMessage: "45 ph√∫t",
        blockStrangers: false,
        createdAt: new Date(),
        updatedAt: new Date(),
        userAuth: {} as User,
      },
      infoId: "info-7",
      refreshTokens: [],
      qrCodes: [],
      posts: [],
      stories: [],
      groupMembers: [],
      cloudFiles: [],
      pinnedItems: [],
      sentFriends: [],
      receivedFriends: [],
      contacts: [],
      contactOf: [],
      settings: [],
      postReactions: [],
      hiddenPosts: [],
      addedBy: [],
      notifications: [],
      sentMessages: [],
      receivedMessages: [],
      comments: [],
    },
    nickname: "B·∫Øc",
    addedAt: new Date(),
  },
  {
    id: "contact-7",
    userId: currentUser.id,
    user: currentUser,
    contactUserId: "user-8",
    contactUser: {
      id: "user-8",
      email: "khang@example.com",
      phoneNumber: "0123456783",
      passwordHash: "hashed_password",
      createdAt: new Date(),
      updatedAt: new Date(),
      userInfo: {
        id: "info-8",
        fullName: "Khang",
        profilePictureUrl: "https://i.pravatar.cc/150?img=8",
        statusMessage: "50 ph√∫t",
        blockStrangers: false,
        createdAt: new Date(),
        updatedAt: new Date(),
        userAuth: {} as User,
      },
      infoId: "info-8",
      refreshTokens: [],
      qrCodes: [],
      posts: [],
      stories: [],
      groupMembers: [],
      cloudFiles: [],
      pinnedItems: [],
      sentFriends: [],
      receivedFriends: [],
      contacts: [],
      contactOf: [],
      settings: [],
      postReactions: [],
      hiddenPosts: [],
      addedBy: [],
      notifications: [],
      sentMessages: [],
      receivedMessages: [],
      comments: [],
    },
    nickname: "Khang",
    addedAt: new Date(),
  },
];

// Mock messages
export const mockMessages: Record<string, Message[]> = {
  "user-2": [
    {
      id: "msg-1",
      content: { text: "B·∫°n: mai code bpppp" },
      senderId: currentUser.id,
      sender: currentUser,
      receiverId: "user-2",
      receiver: mockContacts[0].contactUser,
      recalled: false,
      deletedBy: [],
      reactions: [],
      readBy: ["user-2"],
      createdAt: new Date(Date.now() - 3600000),
      updatedAt: new Date(Date.now() - 3600000),
      messageType: "USER",
    },
    {
      id: "msg-2",
      content: { text: "Anh v·∫´n n√™n ƒëi ƒë·ªçc code ƒëi!" },
      senderId: "user-2",
      sender: mockContacts[0].contactUser,
      receiverId: currentUser.id,
      receiver: currentUser,
      recalled: false,
      deletedBy: [],
      reactions: [],
      readBy: [currentUser.id],
      createdAt: new Date(Date.now() - 1800000),
      updatedAt: new Date(Date.now() - 1800000),
      messageType: "USER",
    },
    {
      id: "msg-3",
      content: { text: "em nghƒ© sao anh ƒë·ªçc h·∫øt ƒë∆∞·ª£c" },
      senderId: currentUser.id,
      sender: currentUser,
      receiverId: "user-2",
      receiver: mockContacts[0].contactUser,
      recalled: false,
      deletedBy: [],
      reactions: [],
      readBy: ["user-2"],
      createdAt: new Date(Date.now() - 900000),
      updatedAt: new Date(Date.now() - 900000),
      messageType: "USER",
    },
    {
      id: "msg-4",
      content: { text: "mai code tippp" },
      senderId: "user-2",
      sender: mockContacts[0].contactUser,
      receiverId: currentUser.id,
      receiver: currentUser,
      recalled: false,
      deletedBy: [],
      reactions: [],
      readBy: [currentUser.id],
      createdAt: new Date(Date.now() - 300000),
      updatedAt: new Date(Date.now() - 300000),
      messageType: "USER",
    },
  ],
  "user-3": [
    {
      id: "msg-5",
      content: { text: "B·∫°n: keduForge@123behe" },
      senderId: currentUser.id,
      sender: currentUser,
      receiverId: "user-3",
      receiver: mockContacts[1].contactUser,
      recalled: false,
      deletedBy: [],
      reactions: [],
      readBy: ["user-3"],
      createdAt: new Date(Date.now() - 7200000),
      updatedAt: new Date(Date.now() - 7200000),
      messageType: "USER",
    },
  ],
  "user-4": [
    {
      id: "msg-6",
      content: { text: "B·∫°n: T√¢m Nh∆∞: @Nguy·ªÖn Thanh C·∫£nh ∆°i" },
      senderId: currentUser.id,
      sender: currentUser,
      receiverId: "user-4",
      receiver: mockContacts[2].contactUser,
      recalled: false,
      deletedBy: [],
      reactions: [],
      readBy: ["user-4"],
      createdAt: new Date(Date.now() - 86400000),
      updatedAt: new Date(Date.now() - 86400000),
      messageType: "USER",
    },
  ],
  "user-5": [
    {
      id: "msg-7",
      content: { text: "B·∫°n: th√¥ng c·∫£m cho b·∫°n" },
      senderId: currentUser.id,
      sender: currentUser,
      receiverId: "user-5",
      receiver: mockContacts[3].contactUser,
      recalled: false,
      deletedBy: [],
      reactions: [],
      readBy: ["user-5"],
      createdAt: new Date(Date.now() - 172800000),
      updatedAt: new Date(Date.now() - 172800000),
      messageType: "USER",
    },
  ],
  "user-6": [
    {
      id: "msg-8",
      content: { text: "B·∫°n: reverse proxy c√≥ nh√¨n subdomain kh√¥ng" },
      senderId: currentUser.id,
      sender: currentUser,
      receiverId: "user-6",
      receiver: mockContacts[4].contactUser,
      recalled: false,
      deletedBy: [],
      reactions: [],
      readBy: ["user-6"],
      createdAt: new Date(Date.now() - 259200000),
      updatedAt: new Date(Date.now() - 259200000),
      messageType: "USER",
    },
  ],
};

// Helper function to get the last message for a contact
export const getLastMessage = (contactUserId: string): Message | undefined => {
  return mockMessages[contactUserId]?.[mockMessages[contactUserId].length - 1];
};

// Helper function to format time
export const formatMessageTime = (date: Date): string => {
  const now = new Date();
  const diff = now.getTime() - date.getTime();

  // Less than a day
  if (diff < 86400000) {
    return date.toLocaleTimeString("vi-VN", {
      hour: "2-digit",
      minute: "2-digit",
    });
  }

  // Less than a week
  if (diff < 604800000) {
    const days = ["CN", "T2", "T3", "T4", "T5", "T6", "T7"];
    return days[date.getDay()];
  }

  // More than a week
  return date.toLocaleDateString("vi-VN", { day: "2-digit", month: "2-digit" });
};
